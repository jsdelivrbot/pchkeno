/* */ 
"format cjs";
function init_pchcom_gamemanager(e,a,r){function o(){s.gameModel.onLoaded.then(c),s.gameModel.onStarted.then(l),s.gameModel.onEnded.then(g)}Object.assign(e,{iframeParent:document.getElementById("htmlgame_frame_div"),wsURL:PCHMINIBOOTSTRAP.htmlgameBaseURL+"index.php?option=com_pchcom_content&task=gameEvent&format=raw&cb="+(new Date).getTime(),gameProxyUrl:IWGAME.gameProxyURL,cacheBuster:123,videoAdTimeout:700,maxAdDuration:7e4,timeoutDuration:15e3,outlineFrameDiv:"#htmlgame_frame_outline",adHolder:"#iw_outer_ad_holder",callBackFunction:"pchcom_callback",gameOverScreenID:"#iwgos",gameOverScreenHolder:"#gosholder",gameOverScreenAmountHolder:"#amount",iwTokenThreshold:IWGAME.iwTokenThreshold});var t=a.apiData,n=a.init;n.serviceUri=e.wsURL,n.service&&(n.service.url=n.serviceUri,n.service.data=t);var i=a.parentInit;i&&(i.service.url=e.wsURL);var s=new r(n,{gos:window.GOS});window.location.href.match(/_simulator=1/)&&window.AjaxSimulator&&(console.log("using simulator"),s.service.ajax=window.AjaxSimulator.ajax),s.setProxy(),PCHGames.errorOccured=!1;var m=void 0;PCHGames.initializeGame=function(){PCHGames.gameId=n.game.id,""!=n.adType?PCHAd.showAd(n.adType,"","instantwin",n.displayTitle):PCHGames.gameLoad()},PCHGames.gameLoad=function(){console.log("PCHGames.gameLoad"),PCHGames.gameDisplayName=n.gaDisplayTitle,PCHGames.gameTokenDescription=n.displayTitle,s.loadGame(),PCHGames.postGameLoadProcessing()};var c=function(e){console.log("----\x3e gameLoaded_cb"),$("#htmlgame_frame_div iframe").attr("scrolling","no"),i.isPath&&(PCHGames.updateProgress(n.gameIndex),PCHGames.updateGameCount(i.gameCount)),u("gameload")},l=function(e){console.log("---\x3e gameStart_cb",e),2==e.body.status&&u("start");try{PCHGames.gameStartCentralCb(e.body)}catch(e){console.log(e)}},g=function(e){console.log("---\x3e gameEnd_cb",e),2==e.body.status&&u("complete"),PCHGames.gameEndCentralCb(e.body)};o(),PCHGames.nextStep=function(){if(PCHGames.resetGOS(),!i.isPath)return s.redirect(),!1;d()};var d=function(){console.log("----\x3e getNextGame"),s.service.nextGame(i.jToken,i.game.id,function(e,a){return m=data.iw_response,void 0!==n.errorMessage&&(PCHGames.errorOccured=!0,PCHGames.makeSplashPageMarkup({idName:"error_occured",text1:"Technical Difficulties",text2:"We're experiencing technical difficulties <br/> with this game.",text3:"Please try again later.",text4:"",gaText:"IWTechDiff",insetDiv:"#done_msg_main_holder"})),""!=m&&(n=m,s.resetGame(n),o()),PCHGames.errorOccured?($("#inner_content,#error_occured").show(),$("#htmlgame_frame_outline").remove(),setTimeout(function(){window.location.href="/"},5e3),!1):null==n?(u("pathcomplete"),s.service.end(i.jToken,i.game.id,null,i.service.data,function(e,a){return PCHGames.TriggerSplashPages(void 0,"#htmlgame_frame_outline"),window.setTimeout(function(){s.redirect()},2e3),!1}),!1):void(i.isPath&&(PCHGames.flashLoaded=!1,$(PCHGames.flashContainerId).hide(),PCHGames.initializeGame()))})};PCHGames.checkGOSError=function(e){var a=a||{hasError:!1};return void 0===e.iw_response.response.data?(a.hasError=!0,"2001"==PCHGames.gameErrorCode&&(a.gosType="AP")):parseInt(e.iw_response.response.errorToken)?(a.hasError=!0,a.winningAmount=addCommas(parseInt(e.iw_response.response.errorToken)),updateTokenBalanceFlag=!0,PCHGames.hasTechnicalError):"1"==PCHGames.hasTechnicalError&&(a.hasError=!0),a},pchcom_gamemanager.triggerCallback=function(e){console.log("triggerCallback",e),"function"==typeof s[e.event]&&s[e.event](e)},pchcom_gamemanager.triggerLibFunction=function(e){console.log("triggerLibFunction",e),"function"==typeof s[e]&&s[e]()};var u=function(e){var a="InstantWin",r="InstantWin";switch(PCH.gaLabel||(PCH.gaLabel=""),n&&n.gaCategoryOverride&&(a=n.gaCategoryOverride),i&&i.gaCategoryOverride&&(r=i.gaCategoryOverride),e){case"pathcomplete":PCHGA.trackEvent(r,e,i.gaDisplayTitle+"/"+PCH.gaLabel);break;case"gameload":case"start":case"complete":PCHGA.trackEvent(a,e,n.gaDisplayTitle+"/"+PCH.gaLabel)}};return pchcom_gamemanager}function pchcom_callback(e){pchcom_gamemanager.triggerCallback(e)}PCHMINIBOOTSTRAP=PCHMINIBOOTSTRAP||{},void 0===PCHMINIBOOTSTRAP.htmlgameBaseURL&&(PCHMINIBOOTSTRAP.htmlgameBaseURL="");var pchcom_gamemanager={};PCHGames.docReadyCallback=function(){return!$("html").hasClass("ie8")||(PCHGames.makeSplashPageMarkup({idName:"done_msg_holder_gameover",text1:"Update Browser",text2:"This game is not designed <br/> to work on Internet Explorer 8",text3:"Please update your browser <a target='_blank' href='http://privacy.pch.com/browserUpgrade'>here</a>.",text4:"",gaText:"IE8issue",insetDiv:"#done_msg_main_holder"}),$("#inner_content,#done_msg_holder_gameover").show(),$("#htmlgame_frame_outline").remove(),setTimeout(function(){window.location.href="/"},5e3),!1)};