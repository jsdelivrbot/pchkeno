/* */ 
"format cjs";
function init_pchcom_gamemanager(e,a,o){console.log("init pchcom game manager"),Object.assign(e,{iframeParent:document.getElementById("htmlgame_frame_div"),wsURL:PCH.GAMES.gameInfo.scoreSubmitURL,gameProxyUrl:IWGAME.gameProxyURL,cacheBuster:123,videoAdTimeout:700,maxAdDuration:7e4,timeoutDuration:15e3,outlineFrameDiv:"#htmlgame_frame_outline",adHolder:"#iw_outer_ad_holder",callBackFunction:"pchcom_callback",gameOverScreenID:"#iwgos",gameOverScreenHolder:"#gosholder",gameOverScreenAmountHolder:"#amount",width:window.innerWidth,height:window.innerHeight,iwTokenThreshold:IWGAME.iwTokenThreshold});var t=a.apiData,n=a.init;n.serviceUri=e.wsURL,n.service&&(n.service.url=n.serviceUri,n.service.data=t);var i=a.parentInit;i&&(i.service.url=e.wsURL);var r=new o(n,{gos:window.GOS});window.location.href.match(/_simulator=1/)&&window.AjaxSimulator&&(console.log("using simulator"),r.service.ajax=window.AjaxSimulator.ajax);var s,c={0:"",1:"silver",2:"gold",tokenwin:"t_win",tokenloose:"t_loose",cashwin:"cash",techDiff:"t_diff",prodlineup:"cashoff-prodlineup",claimURL:"",gameId:"",gameStartError:!1,tokenWon:0,gos_gatag:""},m=!0,l=!1;PCHGames.initializeGame=function(){PCHGames.gameId=n.game.id,PCHGames.gameTokenDescription=n.displayTitle},PCHGames.gameLoad=function(){console.log("PCHGames.gameLoad"),r.loadGame(),s=setTimeout(function(){console.log("gameLoadFailureTimeout called"),v({status:0,score:0,tokens:0})},1e4),"MOBILE"!=PCH.device?$(PCHGames.flashContainerId).show():($(".upper-layer").addClass("hidenav"),$(".bonus_progress").addClass("hidden")),r.gameModel.onLoaded.then(function(){clearTimeout(s)})};var d=function(){var e=window.matchMedia("(orientation: landscape)").matches?"l":"p";e!=PCH.GAMES.gameJson.init.game.orientation?($("body").addClass("showerror"),setTimeout(function(){$("#rotate_error").height($("html").height())},1e3),$("#btm_msg span").html("l"==e?"landscape":"portrait"),m=!1):($("body").removeClass("showerror"),l||m||(n.game.height=window.innerHeight,n.game.width=window.innerWidth,PCHGames.gameLoad(),l=!0))},g=function(e){PCHGames.flashGameEnd(e.body)},u=function(a){a=a.body,$("#forfeit").after('<div class="gosnavlinks all"><span id="gameshome" class="all">Token Games Home</span><span id="gamescat" class="all">More '+PCH.GAMES.gameInfo.categoryName+' Games</span><div class="clear"></div></div>'),$("#gameshome").on("click",function(e){e.preventDefault(),window.location.href="/games"}),$("#gamescat").on("click",function(e){e.preventDefault(),window.location.href=window.location.href.split(PCH.GAMES.gameInfo.gameAlias)[0]}),PCHGames.gameId={gameid:PCH.GAMES.gameInfo.gameId,securitytoken:a.securityToken?a.securityToken:PCH.GAMES.gameJson.init.securityToken,gameType:"SBG"},document.querySelector(e.gameOverScreenAmountHolder).innerHTML="",0!=a.status&&PCHGames.GOSgamesUpdate("#amount",PCH.GAMES.gameInfo.isTournament,PCHUSER.type,a.score,a.tokens,a.tokenMultiplier),PCH.GAMES.gameInfo.isTournament&&(document.querySelector(e.gameOverScreenID).classList.add("stampOn"),0!=a.status&&h(a.tokens)),document.querySelector(e.gameOverScreenHolder).classList.add("t_loose"),document.querySelector(e.gameOverScreenHolder).classList.add(c[PCHUSER.type]),0==a.tokens?($("#congrats_nicejob .t_loose").html("TOO BAD!"),$("#message .silver").html("Create a password to start BANKING TOKENS NOW!")):PCH.GAMES.gameJson.init.positiveMessage&&$("#congrats_nicejob .t_loose").html(PCH.GAMES.gameJson.init.positiveMessage),0==a.status&&(document.querySelector(e.gameOverScreenHolder).classList.add("t_diff"),a.response?1015==a.response.apiErrorCode&&(document.querySelector(e.gameOverScreenHolder).classList.remove(c[1]),document.querySelector(e.gameOverScreenHolder).classList.add(c[2]),$("#congrats_nicejob .t_loose").addClass("double_play").html("Sorry, it appears that you are already playing another game at the same time. Please remember to submit one score before playing another game. Please close all other browsers and refresh this page to play this game again.")):$("#congrats_nicejob .t_loose").html("We are experiencing technical difficulties.")),1==PCHUSER.type&&$("#contBtn div").html("Continue"),document.querySelector(e.outlineFrameDiv).classList.add("hide"),document.querySelector(e.gameOverScreenID).classList.add("show"),1!=PCHUSER.type&&$(".bonus_progress").removeClass("hidden"),$(".alltime").removeClass("hidden"),PCH.gameEndLeaderBoard(),d=function(){},PCHGA.trackEvent(PCHGames.gaGameCategory,"complete",PCH.GAMES.gaCategory+"/"+PCH.GAMES.gaGameName),1==PCHUSER.type&&PCHGA.trackVirtualPageView(document.title,PCHGames.gaGameCategory+"/"+PCH.GAMES.gaGameName+"/GameOverSilver"),2==PCHUSER.type&&PCHGA.trackVirtualPageView(document.title,PCHGames.gaGameCategory+"/"+PCH.GAMES.gaGameName+"/GameOverGold")},h=function(e){p({div:"span.gosAmountHolder",stop:e,callback:function(){$("#gosholder").prepend('<div class="stampOnGOS all"><img class="all" src="/pch_media/images/games/gm-home-featured-cup.jpg"></div>'),$(".stampOnGOS").addClass("stampOnGOSAnimation"),$("#iwgos #gosholder #congrats_nicejob").animate({"margin-top":"65px"},500)}})},p=function(e){var a=e||{};if(a.start=a.start||0,a.intervals=a.intervals||(a.stop-a.start)/20,!a.div||!a.stop)return"function"==typeof a.callback&&(a.callback_parameters?a.callback(a.callback_parameters):a.callback()),!1;var o=$(a.div),t=a.start;o.html(a.start).parent().addClass("countUpAnimation");var n=setInterval(function(){t+=a.intervals,t<=a.stop?o.html(parseInt(t)):(clearInterval(n),"function"==typeof a.callback&&(a.callback_parameters?a.callback(a.callback_parameters):a.callback()))},100);p.resetGOS=function(){o.parent().removeClass("countUpAnimation"),$("#iwgos #amount").css({"font-size":"4.4em"})}},v="MOBILE"!=PCH.device?g:u;return r.gameModel.onEnded.then(v),pchcom_gamemanager.triggerCallback=function(e){console.log("---\x3e triggerCallback",e),"function"==typeof r[e.event]&&r[e.event](e)},pchcom_gamemanager.triggerLibFunction=function(e){console.log("---\x3e triggerLibFunction",e),"function"==typeof r[e]&&r[e]()},"MOBILE"==PCH.device&&(globalOrientationTrigger=function(){},window.addEventListener("orientationchange",function(){try{clearInterval(PCH.orientaionTimer)}catch(e){}PCH.orientaionTimer=setTimeout(d,500)}),d()),pchcom_gamemanager}function pchcom_callback(e){console.log("pchcom_callback",e),pchcom_gamemanager.triggerCallback(e)}PCHMINIBOOTSTRAP=PCHMINIBOOTSTRAP||{},void 0===PCHMINIBOOTSTRAP.htmlgameBaseURL&&(PCHMINIBOOTSTRAP.htmlgameBaseURL=""),"MOBILE"==PCH.device&&(IWGAME.gameJson.init.game.width=window.innerWidth,IWGAME.gameJson.init.game.height=window.innerHeight,IWGAME.gameJson.init.game.device=PCH.device.toLocaleLowerCase());var pchcom_gamemanager={};PCHGames.docReadyCallback=function(){return!0};